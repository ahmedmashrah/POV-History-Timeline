function show_nav(a){var b=void 0!=a?a:parseInt(window.location.hash.replace(/^#/,""));b>1?$("#main-navbar").addClass("show"):$("#main-navbar").removeClass("show")}function page_scroll(){for(var a=$("body").find(".page-scroll"),b=0;b<a.length;b++){var c=a[b],d=c.attributes.href.value.replace(/^#/,"");$(a[b]).attr("data-index",d)}}function json_to_css(a,b){var c="";for(var d in b)b.hasOwnProperty(d)&&(c+="	"+d+": "+b[d]+";\n");return a+"{\n"+c+"\n}\n"}function buildTimeline(){var a="",b="",c=1,d="",e="",f="",g="";$.getJSON("timeline.json",function(h){if(h.sections.length>0){var i=$("#wrapper"),j=document.createElement("main");$(j).attr({id:"pov-timeline","class":"sections"}).appendTo(i);var k=document.createElement("section");$(k).attr({id:h.id,"data-index":c++,"class":"section main-point "+h.id}).appendTo(j),g+=json_to_css(".sections .section."+h.id,h.style.section);var l=document.createElement("div");$(l).attr({"class":"overlay"}).html('<div><img src="'+h.logo+'" class="img-responsive logo"></div><p id="tagline" class="text-center">'+h.sub_title+'</p><ul id="page-nav" class="pov-nav"></ul>').appendTo(k),g+=json_to_css(".sections .section."+h.id+" .overlay",{"background-color":h.style.overlay});for(var m=0;m<h.sections.length;m++){d=h.sections[m],b+='<li><a class="page-scroll ripple" href="#'+d.id+'" data-index="'+c+'">'+d.title+"</a></li>";var n=document.createElement("section");$(n).attr({id:d.id,"data-index":c,"class":"section main-point "+d.id}).appendTo(j),g+=json_to_css(".sections .section."+d.id,d.style.section);var o=document.createElement("div");$(o).attr({"class":"vertical-line"}).appendTo(n),g+=json_to_css(".sections .section."+d.id+" .vertical-line",{"background-color":d.style.vertical_line});var p=document.createElement("div");$(p).attr({"class":"overlay"}).html('<a href="#'+d.id+'-1" data-index="'+ ++c+'" class="page-scroll point-mark"><div class="ripple">'+d.title+'</div></a><p class="title">'+d.desc+"</p>").appendTo(n),g+=json_to_css(".sections .section."+d.id+" .overlay",{"background-color":void 0!=d.style.overlay?d.style.overlay:""}),g+=json_to_css(".sections .section."+d.id+" .point-mark > div",d.style.point_mark),g+=json_to_css(".sections .section."+d.id+" .half > div:nth-child(odd)",{"background-color":d.style.odd_background_color}),g+=json_to_css(".sections .section."+d.id+" .half, .sections .section."+d.id+" .half > div:nth-child(even)",{"background-color":d.style.even_background_color}),e=d.sub_sections;for(var q=0;q<e.length;q++){if(f=e[q],"info"==f.type){var r="";void 0!=f.video&&void 0!=f.video.src&&""!=f.video.src?(f.video.src+="?rel=0&amp;wmode=transparent&amp;showinfo=0",r='<a class="modal-link video '+f.video.type+'" href="'+f.video.src+'&amp;autoplay=1" target="_blank"><img src="'+f.video.cover_img+'" alt=""></a><div class="embed embed-'+f.video.aspect_ratio+'">\n                <iframe class="embed-item" src="'+f.video.src+'&amp;autoplay=0"></iframe>\n              </div>'):void 0!=f.image&&void 0!=f.image.src&&""!=f.image.src&&(r='<div class="image"><img src="'+f.image.src+'" alt=""></div>'),a='<div class="'+f.type+'"><h3 class="title">'+f.title+'</h3><p class="desc">'+f.desc+'</p><div class="media">'+r+"</div></div>"}else"quotes"==f.type&&(a='<div class="'+f.type+'"><p class="quote">'+f.quote+'</p><div class="author-img img-circle text-center"><img src="'+f.author_img+'"></div><h3 class="text-center by-who">'+f.by_who+"</h3></div>");var s=document.createElement("section");$(s).attr({id:d.id+"-"+(q+1),"data-index":c,"class":"section point "+d.id}).appendTo(j);var t=document.createElement("div");$(t).attr({"class":"vertical-line"}).appendTo(s);var u=document.createElement("div");$(u).attr({"class":"overlay"}).html('<a href="#'+d.id+"-"+(q+2)+'" data-index="'+ ++c+'" class="page-scroll point-mark"><div class="ripple">'+f.year+'</div></a><div class="half"><div class="cover-bg"></div><div>'+a+"</div></div>").appendTo(s),g+=json_to_css(".sections .section#"+d.id+"-"+(q+1)+" .half .cover-bg",{"background-image":"url('"+f.bg_img+"')"})}}$("#main-nav, #page-nav").html(b),$("<style></style>").html(g).appendTo("head"),$(".youtube").colorbox({opacity:.75,iframe:!0,innerWidth:640,innerHeight:390}),$(".sections").onepage_scroll({sectionContainer:"section",responsiveFallback:768,loop:!1,updateURL:!0,beforeMove:function(a){show_nav(a)},afterMove:function(a){show_nav(a)}})}})}!function(a,b){b(function(){b(".ripple").on("click",function(c){c.preventDefault();var d=b("<div/>"),e=b(this).offset(),f=c.pageX-e.left,g=c.pageY-e.top;d.addClass("ripple-effect");var h=b(".ripple-effect");h.css("height",b(this).height()),h.css("width",b(this).height()),d.css({top:g-h.height()/2,left:f-h.width()/2,background:b(this).data("ripple-color")}).appendTo(b(this)),a.setTimeout(function(){d.remove()},1e3)})})}(window,jQuery),$(function(){$(document).on("click","a.page-scroll",function(a){var b=$(this).data("index"),c=$(this);0!=$("body.disabled-onepage-scroll").length?($("#menu-toggle").attr("checked",!1),$("html, body").stop().animate({scrollTop:$(c.attr("href")).offset().top},1500,"easeInOutExpo",function(){window.location.hash=b})):(a.preventDefault(),window.location.hash=b,$(".sections").moveTo(b))}),buildTimeline(),show_nav(),$(document).on("mousewheel DOMMouseScroll MozMousePixelScroll",function(){show_nav()}),$("body").scrollspy({target:"#main-navbar"}),$(".navbar-collapse ul li a").click(function(){$(".navbar-toggle:visible").click()})});